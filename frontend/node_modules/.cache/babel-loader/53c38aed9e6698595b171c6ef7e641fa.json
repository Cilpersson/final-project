{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  login: {\n    accessToken: null,\n    userId: 0,\n    errorMessage: null,\n    isSignedIn: false\n  }\n};\nexport const user = createSlice({\n  name: \"user\",\n  initialState: initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      const {\n        accessToken\n      } = action.payload;\n      state.login.accessToken = accessToken;\n    },\n    setUserId: (state, action) => {\n      const {\n        userId\n      } = action.payload;\n      state.login.userId = userId;\n    },\n    setErrorMessage: (state, action) => {\n      const {\n        errorMessage\n      } = action.payload;\n      state.login.errorMessage = errorMessage;\n    },\n    setIsSignedIn: (state, action) => {\n      state.login.isSignedIn = true;\n      localStorage.setItem(\"isSignedIn\", JSON.stringify(true));\n    }\n  }\n});\n/* THUNKS */\n\nexport const login = (email, password) => {\n  const LOGIN_URL = \"http://localhost:8080/sessions\";\n  return dispatch => {\n    fetch(LOGIN_URL, {\n      method: \"POST\",\n      body: JSON.stringify({\n        email,\n        password\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      throw \"Unable to sign in, please try again.\";\n    }).then(json => {\n      dispatch(user.actions.setAccessToken({\n        accessToken: json.accessToken\n      }));\n      dispatch(user.actions.setUserId({\n        userId: json.userId\n      }));\n    }).catch(err => {\n      dispatch(user.actions.logout());\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: err\n      }));\n    });\n  };\n};\nexport const signup = (name, email, password) => {\n  const SIGNUP_URL = \"http://localhost:8080/users\";\n  return dispatch => {\n    fetch(SIGNUP_URL, {\n      method: \"POST\",\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      throw \"Unable to sign up, please try again.\";\n    }).then(json => {\n      dispatch(user.actions.setAccessToken({\n        accessToken: json.accessToken\n      }));\n      dispatch(user.actions.setUserId({\n        userId: json.userId\n      }));\n    }).catch(err => {\n      dispatch(user.actions.logout());\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: err\n      }));\n    });\n  };\n};\nexport const createGrid = () => {};\nexport const logout = () => {\n  return dispatch => {\n    localStorage.setItem(\"isSignedIn\", JSON.stringify(false));\n    dispatch(user.actions.setErrorMessage({\n      errorMessage: null\n    }));\n    dispatch(user.actions.setAccessToken({\n      accessToken: null\n    }));\n    dispatch(user.actions.setUserId({\n      userId: 0\n    }));\n    dispatch(user.actions.setIsSignedIn({\n      isSignedIn: false\n    }));\n  };\n};","map":{"version":3,"sources":["/Users/christina/Desktop/me/project-technigo/final-project/frontend/src/reducers/users.js"],"names":["createSlice","initialState","login","accessToken","userId","errorMessage","isSignedIn","user","name","reducers","setAccessToken","state","action","payload","setUserId","setErrorMessage","setIsSignedIn","localStorage","setItem","JSON","stringify","email","password","LOGIN_URL","dispatch","fetch","method","body","headers","then","res","ok","json","actions","catch","err","logout","signup","SIGNUP_URL","createGrid"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  login: {\n    accessToken: null,\n    userId: 0,\n    errorMessage: null,\n    isSignedIn: false,\n  },\n};\n\nexport const user = createSlice({\n  name: \"user\",\n  initialState: initialState,\n\n  reducers: {\n    setAccessToken: (state, action) => {\n      const { accessToken } = action.payload;\n      state.login.accessToken = accessToken;\n    },\n    setUserId: (state, action) => {\n      const { userId } = action.payload;\n      state.login.userId = userId;\n    },\n    setErrorMessage: (state, action) => {\n      const { errorMessage } = action.payload;\n      state.login.errorMessage = errorMessage;\n    },\n    setIsSignedIn: (state, action) => {\n      state.login.isSignedIn = true;\n      localStorage.setItem(\"isSignedIn\", JSON.stringify(true));\n    },\n  },\n});\n\n/* THUNKS */\n\nexport const login = (email, password) => {\n  const LOGIN_URL = \"http://localhost:8080/sessions\";\n  return (dispatch) => {\n    fetch(LOGIN_URL, {\n      method: \"POST\",\n      body: JSON.stringify({ email, password }),\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        throw \"Unable to sign in, please try again.\";\n      })\n      .then((json) => {\n        dispatch(\n          user.actions.setAccessToken({\n            accessToken: json.accessToken,\n          })\n        );\n        dispatch(\n          user.actions.setUserId({\n            userId: json.userId,\n          })\n        );\n      })\n      .catch((err) => {\n        dispatch(user.actions.logout());\n        dispatch(user.actions.setErrorMessage({ errorMessage: err }));\n      });\n  };\n};\n\nexport const signup = (name, email, password) => {\n  const SIGNUP_URL = \"http://localhost:8080/users\";\n  return (dispatch) => {\n    fetch(SIGNUP_URL, {\n      method: \"POST\",\n      body: JSON.stringify({ name, email, password }),\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        throw \"Unable to sign up, please try again.\";\n      })\n      .then((json) => {\n        dispatch(\n          user.actions.setAccessToken({\n            accessToken: json.accessToken,\n          })\n        );\n        dispatch(\n          user.actions.setUserId({\n            userId: json.userId,\n          })\n        );\n      })\n      .catch((err) => {\n        dispatch(user.actions.logout());\n        dispatch(user.actions.setErrorMessage({ errorMessage: err }));\n      });\n  };\n};\n\nexport const createGrid = () => {};\n\nexport const logout = () => {\n  return (dispatch) => {\n    localStorage.setItem(\"isSignedIn\", JSON.stringify(false));\n    dispatch(user.actions.setErrorMessage({ errorMessage: null }));\n    dispatch(user.actions.setAccessToken({ accessToken: null }));\n    dispatch(user.actions.setUserId({ userId: 0 }));\n    dispatch(user.actions.setIsSignedIn({ isSignedIn: false }));\n  };\n};\n"]},"metadata":{},"sourceType":"module"}